@use 'sass:math';

//
// Custom variables
//

// Product card
$product-card-title-max-lines: 3 !default;

$product-card-title-font-size: 18px !default;
$product-card-title-line-height: $product-card-title-font-size !default;
$product-card-title-max-height: $product-card-title-max-lines *
  $product-card-title-line-height;

$product-card-title-font-size-s: 18px !default;
$product-card-title-line-height-s: $product-card-title-font-size-s !default;
$product-card-title-max-height-s: $product-card-title-max-lines *
  $product-card-title-line-height-s;

$product-card-price-font-size: $product-card-title-font-size !default;
$product-card-price-font-size-s: $product-card-title-font-size-s !default;

$product-card-add-button-width: 36px !default;
$product-card-add-button-height: 36px !default;

// List view product card
$list-view-product-card-media-width: 25% !default;
$list-view-product-card-media-min-width: 160px !default;
$list-view-product-card-price-font-size: 24px !default;

// Scrollbox
$scrollbox-max-height: 305px !default; // max. 10 facets

// Checkbox, radio
$control-checkbox-image: $internal-form-checkbox-image !default;
$control-radio-image: $internal-form-radio-image !default;
$control-inputs-size: 16px !default;
$control-inputs-hover: #f8f8f8 !default;

// Ratio
$ratio-1-1: 100%;
$ratio-2-3: 150%;
$ratio-3-2: 66.66%;
$ratio-3-4: 133.33%;
$ratio-4-3: 75%;
$ratio-4-5: 125%;
$ratio-5-4: 80%;
$ratio-16-9: 56.25%;

// Label
$label-active-background: $global-primary-background !default;
$label-active-color: $global-primary-background !default;
$label-hover-background: $label-active-background !default;
$label-hover-color: $label-active-color !default;
$label-secondary-background: $global-secondary-background !default;
$label-secondary-color: $global-secondary-background !default;

// Other
$max-content-width: $breakpoint-small !default;

$toolbar-container-color: $navbar-nav-item-color !default;
$navbar-item-height: 60px !default;
$navbar-border: $global-border-width solid $global-border !default;

$global-light-muted-background: lighten($global-muted-background, 10%) !default;

$toolbar-container-background: $global-secondary-background !default;

$control-inputs-background: transparent !default;

//
// Extra small grid
//

$grid-xsmall-gutter-horizontal: 8px !default;
$grid-xsmall-gutter-vertical: $grid-xsmall-gutter-horizontal !default;

/* Horizontal */
.uk-grid-xsmall,
.uk-grid-column-xsmall {
  margin-left: (-$grid-xsmall-gutter-horizontal);
}
.uk-grid-xsmall > *,
.uk-grid-column-xsmall > * {
  padding-left: $grid-xsmall-gutter-horizontal;
}

/* Vertical */
.uk-grid + .uk-grid-xsmall,
.uk-grid + .uk-grid-row-xsmall,
.uk-grid-xsmall > .uk-grid-margin,
.uk-grid-row-xsmall > .uk-grid-margin,
* + .uk-grid-margin-xsmall {
  margin-top: $grid-xsmall-gutter-vertical;
}

//
// Fix uk-grid with stacking (tm-product-pricing)
//

.uk-grid.uk-grid-stack.uk-first-column {
  box-sizing: initial;
}

//
// Pagination
//

$pagination-item-active-color: $global-emphasis-color !default;

.uk-pagination a.uk-active {
  color: $pagination-item-active-color;
}

.uk-pagination [data-pagination][data-group='back'] {
  margin-right: auto;
}

.uk-pagination [data-pagination][data-group='forward'] {
  margin-left: auto;
}

.uk-pagination [data-pagination='first'],
.uk-pagination [data-pagination='last'],
.uk-pagination [data-pagination='ellipsis'] {
  @media (max-width: $breakpoint-small) {
    display: none;
  }
}

// Icons

.uk-icon {
  transform: translateY(-1px);
}

.uk-button:not(.tm-product-add-button) .uk-icon {
  transform: translateY(-2px);
}

//
// Custom styles
//

.uk-label-muted {
  background-color: $global-muted-background;
  color: $global-color;
}

.uk-background-success {
  background-color: $global-success-background;
}

.uk-background-warning {
  background-color: $global-warning-background;
}

.uk-background-danger {
  background-color: $global-danger-background;
}

.uk-section-success {
  background-color: darken($global-success-background, 15%);
}

.uk-section-warning {
  background-color: darken($global-warning-background, 15%);
}

.uk-section-danger {
  background-color: darken($global-danger-background, 15%);
}

a.uk-navbar-item.uk-active {
  color: $navbar-nav-item-active-color;
}

.uk-offcanvas {
  z-index: $global-z-index + 10;
  @media (min-width: $breakpoint-medium) {
    z-index: $global-z-index;
  }
}

.uk-offcanvas-bar > .uk-card {
  border-radius: 0;
}

.uk-icon.uk-icon-left {
  margin-right: -20px;
}

.uk-icon.uk-icon-right {
  margin-left: -20px;
}

.uk-label-small {
  font-size: $global-xsmall-font-size;
  line-height: $label-line-height * 2;
}

.uk-label-transparent {
  background: transparent;
  border: 1px solid $global-primary-background;
  color: $global-primary-background;

  &:hover {
    border: 1px solid $label-hover-background !important;
    color: $label-hover-color !important;
  }

  &.uk-label-secondary {
    border: 1px solid $label-secondary-background;
    color: $label-secondary-background;
  }

  &.uk-label-success {
    border: 1px solid $global-success-background;
    color: $global-success-background;
  }

  &.uk-label-warning {
    border: 1px solid $global-warning-background;
    color: $global-warning-background;
  }

  &.uk-label-danger {
    border: 1px solid $global-danger-background;
    color: $global-danger-background;
  }

  .uk-active > & {
    border: 1px solid $label-active-background;
    color: $label-active-color;
  }
}

.uk-breadcrumb > :nth-child(n + 2):not(.uk-first-column)::before {
  margin: 0 $breadcrumb-divider-margin-horizontal;
}

.uk-line-height {
  min-height: $global-line-height + 0em;

  &:empty:before {
    content: '\00A0';
  }
}

img.tm-image[uk-cover] {
  width: 100%;
}

.uk-padding-remove-first:first-child {
  @extend .uk-padding-remove;
}

.uk-padding-remove-last:last-child {
  @extend .uk-padding-remove;
}

.uk-spaced,
a > .uk-text-meta,
a > .uk-text-muted,
span > .uk-text-muted,
span > .uk-text-meta {
  margin-left: 0.8ex;
}

.tm-border-left {
  border-left: $global-border-width solid $global-border;
  padding-left: $global-small-gutter;
}

.uk-light .tm-border-left {
  border-left: $global-border-width solid $inverse-global-border;
}

.tm-border-right {
  border-right: $global-border-width solid $global-border;
  padding-right: $global-small-gutter;
}

.uk-light .tm-border-right {
  border-right: $global-border-width solid $inverse-global-border;
}

.tm-margin-remove [data-part='sections'] {
  & > .tm-section {
    margin: 0 !important;
  }
}

.tm-margin-remove-first > :first-child {
  padding-left: 0;
  margin-left: 0;
}

.tm-border-left {
  border-left: $global-border-width solid $global-border;
}

.tm-border-right {
  border-right: $global-border-width solid $global-border;
}

.tm-border-top {
  border-top: $global-border-width solid $global-border;
}

.tm-border-bottom {
  border-bottom: $global-border-width solid $global-border;
}

.tm-value-listing > :nth-child(n + 2)::before {
  content: $breadcrumb-divider;
  display: inline-block;
  margin: 0 $breadcrumb-divider-margin-horizontal;
  font-size: $breadcrumb-divider-font-size;
  color: $breadcrumb-divider-color;
  @if (mixin-exists(hook-breadcrumb-divider)) {
    @include hook-breadcrumb-divider();
  }
}

.tm-page-main {
  overflow: hidden;
}

.tm-table-sidebar {
  font-size: $table-header-cell-font-size;
  font-weight: $table-header-cell-font-weight;
  color: $table-header-cell-color;
  @if (mixin-exists(hook-table-header-cell)) {
    @include hook-table-header-cell();
  }
}

.tm-list .uk-accordion-title::before {
  display: none;
}

.tm-header h2 {
  @extend .uk-article-title;
}

.tm-header-main {
  @extend .uk-margin-large-top;
  @extend .uk-margin-large-bottom;
}

.tm-section-meta {
  @extend .uk-article-meta;
}

.tm-section-intro {
  @extend .uk-margin-medium-top;
}

.tm-section-image {
  margin: 0;
}

.tm-sections {
  overflow: hidden;
}

.tm-sections > .tm-section {
  @extend .uk-margin-medium;
}

.tm-section + .tm-section:not(:last-child) {
  @extend .uk-margin-bottom;
}

.uk-heading-divider.tm-expand {
  @extend .uk-padding;
  padding-top: 0;
  padding-bottom: $heading-divider-padding-bottom;
}

.tm-section.tm-frame:last-child,
.tm-section:last-child > .uk-margin-bottom,
.tm-section:last-child > .uk-margin,
.tm-section.uk-margin:last-child {
  margin-bottom: 0 !important;
}

.tm-section.tm-expand > .tm-section-title {
  @extend .uk-padding;
  padding-bottom: 0;
}

.tm-section[data-section='section.group'] {
  .tm-section-title,
  [data-section]:not([data-section='section.image']) {
    @extend .uk-padding;
  }

  .tm-section-title {
    padding-bottom: 0;
    margin-bottom: 0;
  }
}

[data-section='section.image'] {
  .tm-section-title {
    padding-bottom: $margin-small-margin;
  }
  figcaption {
    padding-top: $margin-small-margin;
  }
  .tm-section-body {
    padding-top: $margin-medium-margin;
  }
  &.tm-expand .tm-section-body {
    padding-bottom: $margin-medium-margin;
  }
  &.tm-narrow .tm-section-body {
    @extend .uk-padding;
  }
}

[data-section='section.list'] {
  @extend .uk-margin-large-bottom;

  .tm-section-title {
    padding-bottom: $margin-small-margin;
    border-bottom: $global-border-width solid $global-border;
  }
}

[data-section='section.table'] {
  &.tm-expand .tm-section-title {
    margin-bottom: 0;
  }
  &.tm-expand .tm-section-body {
    @extend .uk-padding;
  }
  &.tm-frame {
    @extend .uk-padding;
  }
}

[data-section='section.collection'] {
  &.tm-expand .tm-section-title {
    padding: 0;
  }
}

[data-section='section.text'] {
  &.tm-background .tm-header,
  .tm-header:last-child h3 {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
}

@media (min-width: $breakpoint-small) {
  [data-section='banner'].tm-closable {
    position: absolute;
    width: 100%;
    left: 0;
    right: 0;
    z-index: 100;
    box-shadow: $global-large-box-shadow;
  }
}

@media (max-width: $breakpoint-small) {
  .uk-container.tm-container-expand {
    padding: 0;

    .uk-card-default {
      border-radius: 0;
    }
  }

  [data-section='image.single'] > .uk-padding {
    padding: 0;
  }

  [data-section='banner'] > .tm-banner-media {
    margin-top: -$navbar-item-height;
  }

  [data-section='banner'] .tm-height-screen {
    height: 100vh !important;
  }

  [data-section='banner'].tm-closable .uk-close {
    top: $navbar-item-height;
  }

  [data-layout='mediaLeftFull'],
  [data-layout='mediaRightFull'] {
    [data-part='button'],
    [data-part='media'] {
      height: 100vh;
    }
  }
}

@media (min-width: $breakpoint-small) {
  .tm-section-content-width,
  .tm-section-width.tm-narrow,
  [data-section].tm-narrow {
    width: 100%;
    max-width: $max-content-width;
    margin-right: auto;
    margin-left: auto;
    box-sizing: border-box;
  }

  [data-section].tm-narrow {
    .tm-section-title,
    .tm-section-body {
      @extend .tm-section-content-width;
    }
  }

  [data-section='section.image'] .tm-section-body {
    @extend .tm-section-content-width;
  }

  [data-section='banner'] .uk-container {
    padding: 0;
  }
}

.tm-sidebar h4 {
  font-size: $nav-header-font-size;
  text-transform: $nav-header-text-transform;
  padding: $card-small-body-padding-vertical $card-small-body-padding-horizontal;
  padding-bottom: 0;
  margin: 0;
}

.tm-sidebar li.uk-nav-divider {
  margin: 10px 0;
}

.tm-sidebar-section-divider:not(:first-child) {
  border-top: $nav-dividers-border-width solid $nav-dividers-border;
}

.tm-sidebar-section [data-section='section.text'] {
  padding: $card-small-body-padding-vertical $card-small-body-padding-horizontal;
}

.tm-sidebar .tm-ignore-container:nth-child(1) {
  z-index: 20;
}

.tm-sidebar .tm-ignore-container:nth-child(2) {
  z-index: 15;
}

.tm-sidebar .tm-ignore-container:nth-child(3) {
  z-index: 10;
}

.tm-sidebar .tm-ignore-container:nth-child(4) {
  z-index: 5;
}

.tm-sidebar > .tm-ignore-container + .tm-ignore-container {
  margin-top: $margin-margin;
}

@media (max-width: $breakpoint-small) {
  .tm-sidebar > .tm-ignore-container + .tm-ignore-container {
    margin-top: 0;
  }
}

//
// Custom mixins
//

@mixin center($horizontal: true, $vertical: true) {
  position: absolute;

  @if $horizontal == true and $vertical == true {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  @if $horizontal == true and $vertical == false {
    left: 50%;
    transform: translate(-50%, 0);
  }

  @if $horizontal == false and $vertical == true {
    top: 50%;
    transform: translate(0, -50%);
  }
}

/* Label */
@at-root .tm-label-large {
  font-size: $global-font-size;

  @media (min-width: $breakpoint-small) {
    font-size: $global-large-font-size;
  }
}

/* Tablet landscape and bigger */
@media (min-width: $breakpoint-medium) {
  h3,
  .uk-h3 {
    font-size: $base-h3-font-size-m;
  }
}

//
// Toolbar
//

.tm-toolbar-container:not(.uk-navbar-transparent) {
  background: $toolbar-container-background;
}

.tm-toolbar-container .uk-navbar-item {
  color: $toolbar-container-color;
}

.tm-toolbar-container .uk-navbar-nav > li > a {
  text-transform: none;
}

.tm-toolbar-container .uk-navbar-nav > li > a,
.tm-toolbar-container .uk-navbar-item,
.tm-toolbar-container .uk-navbar-toggle {
  height: 40px;
}

//
// Navbar
//

.uk-navbar-left,
.uk-navbar-right,
.uk-navbar-center:only-child {
  flex-wrap: nowrap;
}

.tm-navbar-container:not(.uk-navbar-transparent) {
  background: $navbar-background;
}

.tm-navbar-container {
  border-bottom: $navbar-border;

  @media (max-width: $breakpoint-small) {
    padding-left: math.div($padding-small-padding, 2);
    padding-right: math.div($padding-small-padding, 2);

    .uk-logo {
      flex: 1;
      min-width: 1px;
      padding: 0;
    }
  }
}

.tm-navbar-container-fixed {
  z-index: $global-z-index + 5;
}

.tm-navbar-container .uk-navbar-nav > li > a,
.tm-navbar-container .uk-navbar-item,
.tm-navbar-container .uk-navbar-toggle {
  height: $navbar-item-height;
}

//
// Navbar button
//

.tm-navbar-button {
  position: relative;
  padding: 0 10px;

  @media (min-width: $breakpoint-small) {
    padding: 0 15px;
  }

  .uk-badge {
    font-size: 0.625rem;
    line-height: 0.625rem;
    position: absolute;
    top: 10px;
    right: 5px;
    min-width: 18px;
    height: 18px;
  }
}

//
// Link to all
//

.tm-link-to-all {
  & > * {
    vertical-align: middle;
  }

  & > .uk-icon {
    position: relative;
    left: 0;
    margin-left: 3px;
    transition: left 60ms;
  }

  &:hover > .uk-icon {
    left: 2px;
  }
}

//
// Aside column
//

.tm-aside-column {
  min-width: 270px;
}

//
// Change view
//

.tm-change-view {
  display: none;

  @media (min-width: $breakpoint-medium) {
    display: flex;
  }
}

//
// Product Grid
//

// .tm-products-grid {
// }

.tm-load-more-button {
  border: 0;
}

//
// Product card
//

.tm-products-overview {
  overflow: hidden;
  border-bottom: $global-border-width solid $global-border;
}

.tm-product-card {
  display: flex;
  flex-direction: row;
  transition: box-shadow $box-shadow-duration ease-in-out;
  background-color: $card-default-background;
  box-shadow: 0 0 0 $global-border-width $global-border;

  &:last-child {
    position: relative;
  }

  .tm-products-grid &:last-child::after {
    box-shadow: 0 0 0 $global-border-width $global-border;
    content: '';
    width: 600%;
    height: 100%;
    background: $card-default-background;
    position: absolute;
    left: 100%;
    top: 0;
  }

  .tm-products-grid &:nth-child(3n + 3) {
    position: relative;
  }

  .tm-products-grid &:nth-child(3n + 3)::after {
    content: '';
    width: 600%;
    height: 100%;
    background: $card-default-background;
    position: absolute;
    left: 100%;
    top: 0;
  }

  .tm-products-grid &:nth-child(3n + 3)::after {
    box-shadow: none;
  }

  .tm-products-slider &:nth-child(3n + 3)::after,
  .tm-products-slider &:last-child::after {
    display: none;
  }

  @media (max-width: $breakpoint-small) {
    .tm-products-slider & {
      box-shadow: none;
    }

    .tm-products-slider &:last-child::after {
      display: none;
    }

    .tm-products-grid-large &:hover {
      box-shadow: none;
    }
  }

  @media (max-width: $breakpoint-medium - 1) {
    width: 100%;

    &.tm-visible {
      border-left: 0;
      border-bottom: 0;
    }
  }

  .tm-products-grid-large & {
    flex-direction: column;

    &:hover {
      z-index: 2;
      box-shadow: $global-xlarge-box-shadow;
    }
  }

  @media (min-width: $breakpoint-medium) {
    flex-direction: column;

    &:hover {
      z-index: 2;
      box-shadow: $global-xlarge-box-shadow;
    }
  }

  .tm-products-grid-large & .tm-product-card-properties {
    display: none;
  }
}

.tm-products-list {
  border-bottom: $global-border-width solid $global-border;
}

// Media
.tm-product-card-media {
  position: relative;
  box-sizing: border-box;
  width: 40%;
  flex-shrink: 0;

  & > .tm-media-box {
    padding: 15px;
  }

  @media (min-width: $breakpoint-small) {
    & > .tm-media-box {
      padding: 20px;
    }
  }

  .tm-products-grid-large & {
    width: 100%;
  }

  @media (min-width: $breakpoint-medium) {
    width: 100%;
  }
}

// Body
.tm-product-card-body {
  display: flex;
  flex-direction: column;
  padding: 15px 15px 15px 0;
  flex-grow: 1;
  min-width: 1px;

  @media (min-width: $breakpoint-small) {
    padding: 20px 20px 20px 0;
  }

  .tm-products-grid-large & {
    padding: 0 20px 20px 20px;
  }

  @media (min-width: $breakpoint-medium) {
    padding: 0 20px 20px 20px;
  }
}

.tm-products-overview .tm-product-card-header {
  @media (max-width: $breakpoint-small) {
    flex-direction: column;
    align-items: flex-start;
  }
}

// Title
.tm-product-card-title {
  font-size: $product-card-title-font-size-s;
  line-height: $product-card-title-line-height-s;
  max-height: $product-card-title-max-height-s;
  display: -webkit-box;
  display: -ms-flexbox;
  overflow: hidden;
  margin: 0 0 20px;
  text-overflow: ellipsis;
  color: inherit;
  -webkit-line-clamp: $product-card-title-max-lines;
  -webkit-box-orient: vertical;

  @media (min-width: $breakpoint-small) {
    font-size: $product-card-title-font-size;
    line-height: $product-card-title-line-height;
    max-height: $product-card-title-max-height;
  }
}

.tm-product-card-properties {
  display: none;
  margin: 0;

  & > li:nth-child(n + 2) {
    margin-top: 5px;
  }

  @media (min-width: $breakpoint-small) and (max-width: $breakpoint-medium) {
    display: flex;

    .tm-product-card-text {
      display: none;
    }
  }
}

.tm-product-card-shop {
  display: flex;
  margin-top: auto;
  align-items: flex-end;

  @media (min-width: $breakpoint-small) and (max-width: $breakpoint-medium) {
    margin-top: 10px;
  }
}

.tm-product-card-price,
.tm-product-price {
  font-size: $product-card-price-font-size-s;
  font-weight: 500;
  line-height: 1;

  @media (min-width: $breakpoint-small) {
    font-size: $product-card-price-font-size;
  }
}

.tm-product-card-add {
  display: flex;
  margin-left: 10px;
  align-items: flex-end;
  flex-shrink: 0;
}

.tm-product-card-add-button {
  position: relative;
  bottom: -8px;
  display: inline-flex;
  width: $product-card-add-button-width;
  height: $product-card-add-button-height;
  padding: 0;
  border-radius: 500px;
  justify-content: center;
  align-items: center;
}

.tm-product-card-add-button-text {
  display: none;
}

// Labels
.tm-product-card-labels {
  & > .uk-label {
    font-size: 10px;
    display: table;
    padding: 0 3px;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

// Actions
.tm-product-card-actions {
  margin-right: 10px;
  margin-bottom: 2px;

  &:only-child {
    margin-right: 0;
  }
}

.tm-product-card-action {
  margin-right: 10px;

  &:last-child {
    margin-right: 0;
  }
}

.tm-product-card-action-text {
  display: none;
  border-bottom: 1px dotted;
}

// List view
.tm-products-list .tm-product-card {
  width: 100%;
  border-bottom: $global-border-width solid $global-border;

  &:last-child {
    border-bottom: none;
  }
}

@media (min-width: $breakpoint-small) and (max-width: $breakpoint-medium) {
  .tm-products-list .tm-product-card-info {
    display: flex;
    flex-direction: column;
    padding-right: 20px;
    flex-grow: 1;
    flex-basis: 0%; // for IE
    overflow: hidden;
  }
}

@media (min-width: $breakpoint-medium) {
  .tm-products-list .tm-product-card {
    flex-direction: row;
  }

  .tm-products-list .tm-product-card-media {
    width: 33.3%;
  }

  .tm-products-list .tm-product-card-body {
    flex-direction: row;
    padding: 20px 20px 20px 0;
  }

  .tm-products-list .tm-product-card-info {
    display: flex;
    flex-direction: column;
    padding-right: 20px;
    flex-grow: 1;
    flex-basis: 0%; // for IE
    overflow: hidden;
  }

  .tm-products-list .tm-product-card-properties {
    display: flex;
    flex-direction: column;

    .uk-list {
      margin-top: 0;
    }
  }

  .tm-products-list .tm-product-card-shop {
    display: block;
    box-sizing: border-box;
    width: $list-view-product-card-media-width;
    min-width: $list-view-product-card-media-min-width;
    margin: 0;
    padding-left: 20px;
    border-left: $global-border-width solid $global-border;
    flex-shrink: 0;
  }

  .tm-products-list .tm-product-price {
    font-size: $list-view-product-card-price-font-size;
  }

  .tm-products-list .tm-product-card-add {
    flex-direction: column;
    margin-top: 10px;
    margin-left: 0;
  }

  .tm-products-list .tm-product-card-add-button {
    bottom: 0;
    width: 100%;
    height: auto;
    padding: 0px $button-padding-horizontal;
    border-radius: $border-rounded-border-radius;
  }

  .tm-products-list .tm-product-card-add-button-icon {
    display: none;
  }

  .tm-products-list .tm-product-card-add-button-text {
    display: block;
  }

  .tm-products-list .tm-product-card-actions {
    display: flex;
    flex-direction: column;
    width: 100%;
    margin-top: 10px;
    margin-right: 0;
    margin-bottom: 0;
    order: 1;
    align-self: flex-start;

    &:only-child {
      margin-top: 0;
    }
  }

  .tm-products-list .tm-product-card-action {
    margin-right: 0;
    margin-bottom: 10px;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .tm-products-list .tm-product-card-action-text {
    display: inline;
    margin-left: 5px;
  }

  .tm-products-list .tm-product-card-shop {
    position: relative;
  }

  .tm-products-list .tm-product-card-pricing {
    .tm-product-card-price-info {
      flex-direction: column;
      align-items: flex-start;

      .tm-product-price {
        margin-bottom: $global-margin;
      }

      .uk-grid-margin > :first-child {
        margin-left: 0 !important;
      }
    }

    .tm-product-card-link {
      position: absolute;
      bottom: 0;
      right: 0;
    }

    > div {
      padding-left: 0;
    }
  }
}

//
// Actions buttons
//

.tm-action-button-active,
.tm-action-button-active > * {
  color: $text-danger-color;
}

.tm-product-card-link {
  margin-right: -35px;
  padding: 0 20px;
  display: block;

  @media (min-width: $breakpoint-small) {
    .tm-products-list & {
      margin-right: -20px;
    }
  }
}

//
// Filters
//

.tm-filters {
  display: none;
}

.tm-filters .uk-accordion > * {
  margin-top: 0;
  border-top: $global-border-width solid $global-border;

  &:first-child {
    border-top: none;
  }
}

.tm-filters .uk-list li {
  label {
    display: flex;
    align-items: center;
    font-size: $global-small-font-size;
  }

  .tm-checkbox + label::before,
  .tm-radio + label::before {
    margin-top: -1px;
  }

  .tm-checkbox + label::after {
    top: 0;
  }
}

// Offcanvas

.tm-offcanvas-bar .uk-card-small {
  padding-top: $global-small-gutter;
  padding-bottom: $global-small-gutter;
}

.uk-nav.tm-nav-level-1 > .uk-parent.uk-open > a {
  color: $global-emphasis-color;
}

.uk-nav.tm-nav-level-1 > .uk-parent > a {
  margin-bottom: $list-divider-margin-top;
  padding-right: $card-small-body-padding-horizontal;
}

.uk-nav.tm-nav-level-1.uk-nav-sub,
.uk-nav.tm-nav-level-2.uk-nav-sub {
  padding-top: $global-small-margin;
}

.uk-nav.tm-nav-level-2.uk-nav-sub {
  padding-left: 0;
  padding-bottom: $subnav-divider-border-height;
  border-top: $subnav-divider-border-width solid $subnav-divider-border;
}

.tm-filters.uk-offcanvas.uk-open {
  margin: 0;
  padding: 0;
}

.tm-filters.uk-offcanvas.uk-offcanvas-overlay:before {
  position: fixed;
}

@media (min-width: $breakpoint-medium) {
  .tm-filters.uk-offcanvas {
    position: static;
    display: block;
  }

  .tm-filters.uk-offcanvas .uk-offcanvas-bar {
    position: static;
    overflow: visible;
    width: auto;
    transform: none;
    background: none;
    top: auto;
    bottom: auto;
    left: auto;
  }

  .tm-filters.uk-offcanvas .uk-offcanvas-bar > .uk-card > .uk-card-header {
    display: none;
  }
}

//
// Scrollbox
//

.tm-scrollbox {
  overflow: auto;
  max-height: $scrollbox-max-height;
  background: linear-gradient(
      $card-default-background 30%,
      rgba(255, 255, 255, 0)
    ),
    linear-gradient(rgba(255, 255, 255, 0), $card-default-background 70%) 0 100%,
    radial-gradient(
      farthest-side at 50% 0,
      rgba(0, 0, 0, 0.2),
      rgba(0, 0, 0, 0)
    ),
    radial-gradient(
        farthest-side at 50% 100%,
        rgba(0, 0, 0, 0.2),
        rgba(0, 0, 0, 0)
      )
      0 100%;
  background-color: $card-default-background;
  background-repeat: no-repeat;
  background-attachment: local, local, scroll, scroll;
  background-size: 100% 40px, 100% 40px, 100% 14px, 100% 14px;
}

//
// Checkbox, radio
//

.tm-checkbox,
.tm-radio {
  display: none;

  & + label {
    position: relative;
    display: inline-flex;
    cursor: pointer;
  }

  & + label::before,
  & + label::after {
    content: '';
    display: block;
    width: $control-inputs-size;
    height: $control-inputs-size;
  }

  & + label::before {
    margin-top: 3px;
    margin-right: $global-small-margin;
    border: $global-border-width solid $global-border;
    background: $control-inputs-background;
    flex-shrink: 0;
  }

  &:hover + label::before {
    background-color: $control-inputs-hover;
  }

  &:checked + label::before {
    border-color: transparent;
    background-color: $global-primary-background;
  }

  & + label::after {
    position: absolute;
    top: 3px;
    left: 0;
    border: 1px solid transparent;
  }

  &:checked + label::after {
    background-color: transparent;
    background-repeat: no-repeat;
    background-position: 50% 50%;
  }
}

.tm-checkbox + label::before {
  border-radius: $border-rounded-border-radius;
}

.tm-radio + label::before {
  border-radius: 50%;
}

.tm-checkbox:checked + label::after {
  @include svg-fill($control-checkbox-image, '#000', $global-inverse-color);
}

.tm-radio:checked + label::after {
  @include svg-fill($control-radio-image, '#000', $global-inverse-color);
}

//
// Help icon
//

.tm-help-icon {
  position: relative;
  margin-left: $global-xsmall-margin;
  cursor: pointer;
  color: $global-muted-color;
  border-radius: 100%;
  background-color: $global-muted-background;

  &:hover {
    color: $global-color;
  }
}

//
// Slider
//

.tm-slider-items {
  .tm-media-box-frame {
    padding: $global-xsmall-gutter;
    transition: 0.25s linear;
    transition-property: opacity;
    opacity: 0.75;
  }

  & > :hover .tm-media-box-frame {
    opacity: 1;
  }

  & > .uk-active .tm-media-box-frame {
    opacity: 1;
    border-color: $global-primary-background;
  }
}

.tm-thumbnail-slider .uk-slider-container {
  padding: $global-border-width;
}

//
// Variations
//

$color-dot-size: 8px !default;
$color-dot-margin: $color-dot-size !default;
$color-dot-radius: 50% !default;
$color-dot-border-width: 1px !default;
$color-dot-border: $global-background !default;
$color-dot-shadow: 0 0 2px rgba(0, 0, 0, 0.4) !default;

.tm-color-dot {
  width: $color-dot-size;
  height: $color-dot-size;
  border: $color-dot-border-width solid $color-dot-border;
  border-radius: $color-dot-radius;
  box-shadow: $color-dot-shadow;
  margin-right: $color-dot-margin;
}

.tm-product-card-media {
  .tm-color-dots {
    width: 100%;
    display: flex;
    align-items: center;
    height: $color-dot-size * 3;
    margin-bottom: -($color-dot-size * 2);
  }

  .tm-products-list & {
    .tm-color-dots {
      display: none;
    }
  }

  @media (max-width: $breakpoint-medium) {
    .tm-color-dots {
      display: none;
    }
  }
}

.tm-product-card-info {
  .tm-color-dots {
    display: none;
  }

  .tm-color-pills {
    display: none;
    flex-wrap: wrap;

    .tm-pill {
      margin-bottom: 10px;

      &.tm-variation-color > div {
        width: 15px;
        height: 15px;
      }
    }
  }

  .tm-products-list & .tm-color-pills {
    display: flex;
  }

  @media (max-width: $breakpoint-small) {
    .tm-color-dots {
      display: flex;
    }

    .tm-products-list & .tm-color-pills {
      display: none;
    }
  }

  @media (min-width: $breakpoint-small) and (max-width: $breakpoint-medium) {
    .tm-color-pills {
      display: flex;
    }
  }
}

.tm-color-pills {
  display: flex;

  .tm-pill {
    margin-right: $global-small-margin;
  }
}

.tm-pill {
  display: block;

  border-radius: $border-rounded-border-radius;
  font-size: $subnav-item-font-size;
  text-transform: $subnav-item-text-transform;
  transition: 0.1s ease-in-out;
  transition-property: color, background-color;

  color: $global-color;
  border: $global-border-width solid $global-border;
  padding: $subnav-pill-item-padding-vertical
    $subnav-pill-item-padding-horizontal;

  @if (mixin-exists(hook-subnav-pill-item)) {
    @include hook-subnav-pill-item();
  }

  &:hover,
  &.tm-highlight,
  &.uk-active.tm-highlight {
    background-color: $subnav-pill-item-hover-background;
    color: $subnav-pill-item-hover-color;

    @if (mixin-exists(hook-subnav-pill-item-hover)) {
      @include hook-subnav-pill-item-hover();
    }
  }

  &:active {
    background-color: $subnav-pill-item-onclick-background;
    color: $subnav-pill-item-onclick-color;

    @if (mixin-exists(hook-subnav-pill-item-onclick)) {
      @include hook-subnav-pill-item-onclick();
    }
  }

  .uk-active &,
  &.uk-active {
    color: $global-color;
    border-color: $global-primary-background;
    background-color: transparent;

    @if (mixin-exists(hook-subnav-pill-item-active)) {
      @include hook-subnav-pill-item-active();
    }
  }

  &.tm-variation-color {
    padding: math.div($subnav-pill-item-padding-horizontal, 2);
    border-radius: 50%;
    display: block;

    > div {
      width: 20px;
      height: 20px;
      border-radius: 50%;
    }
  }
}

//
// Product
//

.tm-product-info {
  // border-top: $global-border-width solid $global-border;

  @media (min-width: $breakpoint-medium) {
    // min-width: 390px;
    // border-top: none;
    border-left: $global-border-width solid $global-border;
  }
}

// Price
.tm-product-purchase .tm-product-price {
  font-size: 32px;
  font-weight: 500;
  line-height: 1;
}

// Add to card button
.tm-product-add-button {
  padding: 0 15px;

  transition: color, background-color 300ms ease-out;

  &[disabled] {
    border-color: $button-primary-background;
    color: $button-primary-background;
  }

  &.uk-flex {
    padding: 0 $global-small-gutter;
  }
}

// Description
.tm-product-description {
  border-top: $global-border solid $global-border-width;
}

// Variations
.tm-variations-date {
  .tm-variations > div {
    display: block;
    width: 100%;
  }
}

// Availability

[data-availability] [data-part='icon'] svg {
  transition: all 300ms ease-out;
}

[data-status='loading'] [data-part='icon'] {
  color: $global-color !important;
}

[data-availability='in-stock'] [data-part='icon'] {
  color: $global-success-background;
}

[data-availability='out-of-stock'] [data-part='icon'] {
  color: $global-danger-background;
}

[data-availability^='ships-in-'] [data-part='icon'] {
  color: $global-warning-background;
}

// Nav

.tm-menu-column-header {
  margin-bottom: $global-small-margin;
  display: block;
}

.tm-product-nav {
  display: flex;
  overflow: auto;
  background-color: $global-background;

  & > .uk-subnav {
    display: flex;
    margin: 0 auto;
    padding: 10px 15px;
    flex-wrap: nowrap;
    flex-shrink: 0;

    @media (min-width: $breakpoint-small) {
      padding: 20px;
    }

    & > :first-child {
      padding-left: 0;
    }
  }
}

.tm-product-nav-fixed {
  transition: box-shadow 0.1s ease-in-out;
  box-shadow: inset 0 -$global-border-width 0 0 $global-border;
}

//
// Quantity
//

.tm-quantity-input {
  .uk-input {
    width: $global-control-height;
    padding: 0;
    text-align: center;
  }

  &.tm-quantity-input-buttons .uk-input {
    margin: 0 $global-small-margin;
  }
}

//
// Slidenav
//

.tm-slidenav.uk-invisible {
  visibility: visible !important;
  pointer-events: none;
  opacity: 0.3;
}

//
// Checkout
//

.tm-checkout {
  counter-reset: list;
}

.tm-checkout-title::before {
  content: counter(list) '. ';
  counter-increment: list;
  color: $global-muted-color;
}

//
// Choose
//

.tm-choose {
  position: relative;
  width: 100%;
  padding: 40px 20px 10px;
  cursor: pointer;
  border: $global-border-width solid $global-border;
  border-radius: $border-rounded-border-radius;

  .uk-active & {
    border-color: $global-primary-background;
  }

  &:not(.uk-active):hover,
  &:not(.uk-active):focus {
    background-color: $global-muted-background;
  }

  &::before,
  &::after {
    content: '';
    position: absolute;
    top: 12px;
    left: 50%;
    display: block;
    width: $control-inputs-size;
    height: $control-inputs-size;
    cursor: pointer;
    transform: translate(-50%, 0);
  }

  &::before {
    border: $global-border-width solid $global-border;
    border-radius: 50%;
    flex-shrink: 0;
  }

  &:hover::before {
    background-color: $control-inputs-hover;
  }

  .uk-active &::before {
    border-color: transparent;
    background-color: $global-primary-background;
  }

  &::after {
    position: absolute;
    border: 1px solid transparent;
  }

  .uk-active &::after {
    background-color: transparent;
    background-repeat: no-repeat;
    background-position: 50% 50%;
    @include svg-fill($control-radio-image, '#000', $global-inverse-color);
  }

  .tm-choose-title {
    font-size: $global-small-font-size;
    text-align: center;
    text-transform: uppercase;
    color: $global-muted-color;
  }

  .uk-active & .tm-choose-title {
    color: $global-color;
  }

  .tm-choose-description {
    font-size: $global-xsmall-font-size;
    margin-top: $global-xsmall-margin;
    text-align: center;
    color: $global-muted-color;
  }
}

//
// Wrapper
//

// Small card
.uk-card-body.uk-card-small .tm-expand,
.uk-card-small .uk-card-body .tm-expand {
  margin-right: -$card-small-body-padding-horizontal;
  margin-left: -$card-small-body-padding-horizontal;
}

.uk-card-body.uk-card-small .tm-expand:first-child,
.uk-card-small .uk-card-body .tm-expand:first-child,
.uk-card-small .uk-position-cover.tm-expand {
  margin-top: -$card-small-body-padding-vertical;
}

.uk-card-body.uk-card-small .tm-expand:last-child,
.uk-card-small .uk-card-body .tm-expand:last-child,
.uk-card-small .uk-position-cover .tm-expand {
  margin-bottom: -$card-small-body-padding-vertical;
}

.uk-card-body.uk-card-small .tm-expand figcaption,
.uk-card-small .uk-card-body .tm-expand figcaption {
  margin-right: $card-small-body-padding-horizontal;
  margin-left: $card-small-body-padding-horizontal;
}

// Normal card
.uk-card-body .tm-expand {
  margin-right: -$card-body-padding-horizontal;
  margin-left: -$card-body-padding-horizontal;
}

.uk-card-body .tm-expand:first-child,
.uk-card-body .uk-position-cover.tm-expand {
  margin-top: -$card-body-padding-vertical;
}

.uk-card-body .tm-expand:last-child,
.uk-card-body .uk-position-cover.tm-expand {
  margin-bottom: -$card-body-padding-vertical;
}

.uk-card-body .tm-expand figcaption {
  margin-top: $global-xsmall-margin;
  margin-right: $card-body-padding-horizontal;
  margin-left: $card-body-padding-horizontal;
  text-align: center;
  color: $global-muted-color;
}

@media (min-width: $breakpoint-large) {
  .uk-card-body .tm-expand {
    margin-right: -$card-body-padding-horizontal-l;
    margin-left: -$card-body-padding-horizontal-l;
  }

  .uk-card-body .tm-expand:first-child {
    margin-top: -$card-body-padding-vertical-l;
  }

  .uk-card-body .tm-expand:last-child {
    margin-bottom: -$card-body-padding-vertical-l;
  }
}

//
// Compare table
//

.tm-compare-table {
  height: 0;

  td,
  th {
    vertical-align: top;
  }

  td:not(:first-child) {
    //border-left: $table-striped-border-width solid $table-striped-border;
  }

  th {
    font-size: $global-font-size;
    text-transform: none;
  }

  tbody > tr:nth-of-type(even) {
    background-color: $table-striped-row-background;
  }
}

.tm-compare-table-column {
  min-width: 240px;
}

//
// Rating
//

.tm-rating {
  margin-left: -3px;
  color: $global-muted-color;

  & > * {
    padding-left: 3px;
  }
}

//
// Reviews
//

.tm-reviews-column {
  min-width: 200px;
}

//
// Cart
//

.tm-cart-quantity-column {
  min-width: 115px !important;
}

//
// Nav
//

.tm-nav {
  padding: 10px 0;
}

.tm-nav > li {
  margin: 5px 0;
}

.tm-nav > li > a {
  padding: 5px 0;
}

.tm-nav > li.uk-active > a,
.tm-nav > li > a:hover {
  box-shadow: inset 2px 0 0 $global-primary-background;
}

.tm-nav > li.uk-active > a {
  font-weight: 500;
}

//
// Ratio
//

.tm-ratio {
  position: relative;

  &::before {
    content: '';
    display: block;
    width: 100%;
  }

  & > * {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

.tm-ratio-1-1::before {
  padding-top: $ratio-1-1;
}

.tm-ratio-2-3::before {
  padding-top: $ratio-2-3;
}

.tm-ratio-3-2::before {
  padding-top: $ratio-3-2;
}

.tm-ratio-3-4::before {
  padding-top: $ratio-3-4;
}

.tm-ratio-4-3::before {
  padding-top: $ratio-4-3;
}

.tm-ratio-4-5::before {
  padding-top: $ratio-4-5;
}

.tm-ratio-5-4::before {
  padding-top: $ratio-5-4;
}

.tm-ratio-16-9::before {
  padding-top: $ratio-16-9;
}

//
// Media box
//

.tm-media-box img,
.tm-media-box-wrap img {
  background: #fff;
}

.tm-media-box[data-placeholder] img,
.tm-media-box-wrap[data-placeholder] img {
  background: transparent;
}

.tm-media-box {
  display: block;
  box-sizing: border-box;
  height: 100%;
  cursor: default;
}

a.tm-media-box {
  cursor: pointer;
}

.tm-media-box-frame {
  border: $global-border-width solid $global-border;
  border-radius: $border-rounded-border-radius;
}

[uk-lightbox] .tm-media-box-zoom {
  cursor: zoom-in;
}

.tm-media-box-wrap {
  position: relative;
  height: 100%;
  margin: 0;

  & > * {
    @include center();
    display: block;
    max-width: 100%;
    max-height: 100%;
  }
}

//
// Pseudo
//

.tm-pseudo {
  border-bottom: $global-border-width dotted;
}

//
// Ignore container
//

.tm-ignore-container {
  @media (max-width: $breakpoint-small) {
    margin-right: -$container-padding-horizontal;
    margin-left: -$container-padding-horizontal;
    border-radius: 0;

    &.uk-sticky-fixed {
      left: 0;
      right: 0;
      width: 100% !important;
    }
  }
}

@media (max-width: $breakpoint-small) {
  .tm-ignore-margin {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
  .tm-ignore-margin-top {
    margin-top: 0 !important;
  }
  .tm-ignore-margin-bottom {
    margin-bottom: 0 !important;
  }

  .tm-ignore-padding {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }
  .tm-ignore-padding-top {
    padding-top: 0 !important;
  }
  .tm-ignore-padding-bottom {
    padding-bottom: 0 !important;
  }
}

//
// Remove shadow
//

.tm-shadow-remove {
  box-shadow: none;
}

//
// Shine effect
//

.tm-shine {
  position: relative;
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: -30px;
    width: 30px;
    height: 100%;
    transform: skew(-10deg, 0deg);
    opacity: 0.3;
    background: linear-gradient(
      to right,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.03) 1%,
      rgba(255, 255, 255, 0.6) 30%,
      rgba(255, 255, 255, 0.85) 50%,
      rgba(255, 255, 255, 0.85) 70%,
      rgba(255, 255, 255, 0.85) 71%,
      rgba(255, 255, 255, 0) 100%
    );
  }

  &:hover::after {
    left: 100%;
    transition: 0.6s ease-out;
  }

  &[disabled]::after {
    display: none;
  }
}

//
// Grayscale
//

.tm-grayscale {
  filter: grayscale(100%) opacity(50%);

  &:hover {
    filter: none;
  }
}

// Payment Icons

.tm-payment-icons {
  display: flex;
  flex-direction: row;
  flex-basis: 100%;
  justify-content: stretch;
  align-items: stretch;
  align-content: center;

  & > * {
    display: flex;
    flex: 1;
    flex-basis: 120px;
    margin: 10px;
    justify-content: center;
  }

  & svg {
    height: 24px;
  }

  .tm-payment-type-label {
    margin-right: 10px;
    display: none;
  }

  @media (min-width: $breakpoint-small) {
    flex-basis: 50%;
  }
}

// Sidebar

.tm-sidebar-search .uk-search-input {
  border: none;
}

.uk-search .uk-search-input:first-child {
  padding-left: $form-padding-horizontal;
  padding-right: $form-padding-horizontal;
}

.uk-search.tm-refinement-list-search .uk-search-input {
  padding-left: 0;
  padding-right: 0;
  border-top: 0;
  border-left: 0;
  border-right: 0;
  border-radius: 0;
}

// No results

.tm-products .tm-placeholder-container {
  min-height: 460px;
}

// Custom inputs

.uk-form-custom {
  text-transform: inherit !important;

  white-space: nowrap;

  .uk-text-meta,
  .uk-text-muted {
    margin: 0;
  }
}

//
// Inverse
//

// .uk-navbar-container,
// .uk-card-default,
// .uk-card-muted,
// .uk-card-primary,
// .uk-card-secondary,
// .uk-tile-default,
// .uk-tile-muted,
// .uk-tile-primary,
// .uk-tile-secondary,
// .uk-section-default,
// .uk-section-muted,
// .uk-section-primary,
// .uk-section-secondary,
// .uk-overlay-default,
// .uk-overlay-primary {

// }
